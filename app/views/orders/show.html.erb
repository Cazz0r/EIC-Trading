<div class="bask-wrapper">
  <div class="element">
    <h3><%= @order.account.name %> <%= @order.type_text%> &middot; <a onClick="page.toggleElement('div.edit-order');">Edit Order</a></h3>
    <p class="text"><%= @order.description %></p>
  </div>
  
  <div class="element edit-order form bound hidden">
    <div class="input-group">
      <label for="order_order_type">Type *</label>
      <%= select("order", "order_type", [["Order", ORDER_BUY],["Contribution", ORDER_CONTRIBUTE]], {}, class: "styled-select grey rounded", value: @order.order_type) %>
    </div>
    <div class="input-group">
      <label for="order_status">Status *</label>
      <%= select("order", "status", [["Open", ORDER_OPEN],["Closed", ORDER_CLOSED],["Canceled", ORDER_CANCELED]], {}, class: "styled-select grey rounded", value: @order.status) %>
    </div>
    <div class="input-group">
      <label for="order_details">Details</label>
      <textarea placeholder="Trade/Order details... I.E. 25 Modular terminals." id="order_details"></textarea>
    </div>
    <div class="input-group">
      <label for="order_account_id">Account *</label>
      <%= select("order", "account_id", Account.all.order("name asc").collect {|a| [a.name, a.id]}, {prompt: 'Select Account'}, class: "styled-select grey rounded", value: @order.account.id) %>
    </div>
    <div class="input-group">
      <label for="order_user_id">Assigned CMDR *</label>
      <%= select("order", "user_id", User.all.order("username asc").collect {|a| [a.username, a.id]}, {prompt: 'Select CMDR'}, class: "styled-select grey rounded", value: @order.user.id) %>
    </div>
    <div class="input-group">
      <button onclick="page.orders.updateOrder();">Update Order</button>
    </div>
  </div>

  <div class="element model-list">
    <% @trade_events.each do |trade_event| %>
      <div class="listing">
        <div class="main two-wide">
          <div class="left">
            <a href="/cmdrs/<%= trade_event.user.id %>"><div class="image" style="background-image: url(<%= trade_event.user.image_url %>)"></div></a>
          </div>
          <div class="right">
            <p class="meta">
              <a onclick="page.toggleElement('div.edit-trade-event-<%= trade_event.id %>');">Edit</a> &middot;

              <span class="really-delete-<%= trade_event.id %> hidden"> Really? <a onclick="page.tradeEvents.deleteTradeEvent(<%= trade_event.id %>);"><strong>Yes</strong></a> &middot; <a onclick="page.toggleElement('span.really-delete-<%= trade_event.id %>');page.toggleElement('a.start-delete-<%= trade_event.id %>');">No</a></span>
              <a onclick="page.toggleElement('span.really-delete-<%= trade_event.id %>');page.toggleElement('a.start-delete-<%= trade_event.id %>');" class="start-delete-<%= trade_event.id %>">Delete</a> &middot;
              
              <a href="/cmdrs/<%= trade_event.user.id %>"><%= trade_event.user.username %></a> &middot; <%= trade_event.created_at.utc.to_formatted_s(:long_ordinal) %> UTC</p>
            <p class="quote">"<%= trade_event.content %>"</p>
          </div>
        </div>
        <div class="tools edit-trade-event-<%= trade_event.id %> hidden">
          <div class="element form">
            <div class="input-group">
              <input type="text" placeholder="i.e. Contributed 25 MTs." id="trade_event_input_<%= trade_event.id %>" value="<%= trade_event.content %>" />
            </div>
            <div class="input-group">
              <button onclick="page.tradeEvents.updateTradeEvent(<%= trade_event.id %>);">Update Trade Event
              </button><button onclick="page.toggleElement('div.edit-trade-event-<%= trade_event.id %>');">Cancel</button>
            </div>
          </div>
        </div>
      </div>
    <% end %>
  </div>
</div>